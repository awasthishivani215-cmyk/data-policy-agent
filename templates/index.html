<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PolicyGuard AI - Data Policy Compliance Dashboard</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    
    <style>
        /* ===== CSS RESET & BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Color Palette */
            --primary: #4f46e5;
            --primary-dark: #3730a3;
            --primary-light: #818cf8;
            --primary-50: #eef2ff;
            --secondary: #10b981;
            --secondary-dark: #059669;
            --secondary-light: #34d399;
            --danger: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
            --success: #10b981;
            --dark: #1f2937;
            --light: #f9fafb;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            
            /* Theme Colors */
            --sidebar-bg: #1e1b4b;
            --sidebar-text: #e0e7ff;
            --card-bg: #ffffff;
            --header-bg: rgba(255, 255, 255, 0.98);
            
            /* Shadows */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            
            /* Borders */
            --radius-sm: 0.5rem;
            --radius-md: 0.75rem;
            --radius-lg: 1rem;
            --radius-xl: 1.5rem;
            --radius-full: 9999px;
            
            /* Transitions */
            --transition-fast: 150ms ease;
            --transition-normal: 300ms ease;
            --transition-slow: 500ms ease;
            
            /* Layout */
            --sidebar-width: 260px;
            --header-height: 70px;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--dark);
            line-height: 1.6;
        }

        /* ===== LAYOUT CONTAINER ===== */
        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* ===== SIDEBAR ===== */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--sidebar-bg);
            color: var(--sidebar-text);
            position: fixed;
            height: 100vh;
            left: 0;
            top: 0;
            z-index: 100;
            transition: transform var(--transition-normal);
            box-shadow: var(--shadow-xl);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .sidebar-header {
            padding: 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .sidebar-logo {
            font-family: 'Poppins', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: white;
        }

        .sidebar-logo i {
            font-size: 2rem;
            color: var(--primary-light);
        }

        .sidebar-nav {
            padding: 1.5rem 0;
            flex: 1;
        }

        .nav-group {
            margin-bottom: 1.5rem;
        }

        .nav-group-title {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--gray-400);
            padding: 0 1.5rem;
            margin-bottom: 0.75rem;
            font-weight: 600;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.875rem 1.5rem;
            color: var(--sidebar-text);
            text-decoration: none;
            transition: all var(--transition-fast);
            position: relative;
            cursor: pointer;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .nav-item.active {
            background: var(--primary);
            color: white;
            border-right: 4px solid var(--secondary);
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 20px;
            background: var(--secondary);
        }

        .nav-item i {
            width: 20px;
            text-align: center;
            font-size: 1.1rem;
        }

        .nav-badge {
            margin-left: auto;
            background: var(--secondary);
            color: white;
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-full);
            font-weight: 600;
        }

        .sidebar-footer {
            padding: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: auto;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: white;
        }

        .user-info h4 {
            font-size: 0.875rem;
            font-weight: 600;
            color: white;
        }

        .user-info p {
            font-size: 0.75rem;
            color: var(--gray-400);
        }

        /* ===== MAIN CONTENT ===== */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            background: var(--gray-50);
            min-height: 100vh;
        }

        /* ===== HEADER ===== */
        .main-header {
            height: var(--header-height);
            background: var(--header-bg);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 90;
            padding: 0 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--gray-200);
            box-shadow: var(--shadow-sm);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .page-title h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
        }

        .page-title p {
            font-size: 0.875rem;
            color: var(--gray-600);
        }

        .header-search {
            position: relative;
            width: 300px;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 3rem;
            border: 2px solid var(--gray-300);
            border-radius: var(--radius-md);
            font-family: inherit;
            font-size: 0.95rem;
            transition: all var(--transition-fast);
            background: var(--gray-50);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray-500);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .header-actions {
            display: flex;
            gap: 1rem;
        }

        .header-action {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: var(--gray-100);
            color: var(--gray-700);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all var(--transition-fast);
            position: relative;
        }

        .header-action:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }

        .notification-badge {
            position: absolute;
            top: -2px;
            right: -2px;
            background: var(--danger);
            color: white;
            font-size: 0.75rem;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.5rem;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .user-menu:hover {
            background: var(--gray-100);
        }

        .user-menu img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }

        .user-menu span {
            font-weight: 600;
            color: var(--dark);
        }

        /* ===== CONTENT WRAPPER ===== */
        .content-wrapper {
            padding: 2rem;
        }

        /* ===== DASHBOARD GRID ===== */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .dashboard-card {
            background: var(--card-bg);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--gray-200);
            transition: transform var(--transition-normal);
        }

        .dashboard-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .card-title {
            font-family: 'Poppins', sans-serif;
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .card-title i {
            color: var(--primary);
            font-size: 1.5rem;
        }

        .card-actions {
            display: flex;
            gap: 0.5rem;
        }

        .card-action {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 1px solid var(--gray-300);
            background: white;
            color: var(--gray-600);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .card-action:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* ===== STATS CARDS ===== */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--gray-200);
            display: flex;
            align-items: center;
            gap: 1rem;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(to bottom, var(--primary), var(--secondary));
        }

        .stat-icon {
            width: 56px;
            height: 56px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            color: white;
        }

        .stat-card:nth-child(1) .stat-icon { background: linear-gradient(135deg, var(--primary), var(--primary-light)); }
        .stat-card:nth-child(2) .stat-icon { background: linear-gradient(135deg, var(--success), var(--secondary-light)); }
        .stat-card:nth-child(3) .stat-icon { background: linear-gradient(135deg, var(--warning), #fbbf24); }
        .stat-card:nth-child(4) .stat-icon { background: linear-gradient(135deg, var(--info), #60a5fa); }

        .stat-content h3 {
            font-family: 'Poppins', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 0.25rem;
            line-height: 1;
        }

        .stat-content p {
            color: var(--gray-600);
            font-size: 0.875rem;
            font-weight: 500;
        }

        .stat-trend {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.875rem;
            font-weight: 600;
            margin-top: 0.5rem;
        }

        .trend-up { color: var(--success); }
        .trend-down { color: var(--danger); }

        /* ===== CHARTS SECTION ===== */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .chart-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--gray-200);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .chart-title {
            font-family: 'Poppins', sans-serif;
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--dark);
        }

        .chart-controls {
            display: flex;
            gap: 0.5rem;
        }

        .chart-control {
            padding: 0.5rem 1rem;
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-md);
            background: white;
            color: var(--gray-700);
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .chart-control:hover {
            background: var(--gray-100);
        }

        .chart-control.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .chart-container {
            height: 300px;
            position: relative;
        }

        /* ===== COMPLIANCE METER ===== */
        .compliance-meter {
            background: linear-gradient(135deg, var(--primary-50), white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            display: flex;
            align-items: center;
            gap: 3rem;
            margin-bottom: 2rem;
            border: 1px solid var(--gray-200);
        }

        .meter-circle {
            position: relative;
            width: 180px;
            height: 180px;
        }

        .progress-ring {
            transform: rotate(-90deg);
        }

        .progress-ring-bg {
            fill: none;
            stroke: var(--gray-200);
            stroke-width: 12;
        }

        .progress-ring-fill {
            fill: none;
            stroke: url(#gradient);
            stroke-width: 12;
            stroke-linecap: round;
            stroke-dasharray: 565.48;
            stroke-dashoffset: 565.48;
            transition: stroke-dashoffset 1.5s ease;
        }

        .meter-value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .meter-value h2 {
            font-family: 'Poppins', sans-serif;
            font-size: 3rem;
            font-weight: 800;
            color: var(--dark);
            margin: 0;
            line-height: 1;
        }

        .meter-value p {
            color: var(--gray-600);
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }

        .meter-breakdown {
            flex: 1;
        }

        .breakdown-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            margin-bottom: 0.75rem;
            background: white;
            border-radius: var(--radius-md);
            border-left: 4px solid var(--gray-400);
            box-shadow: var(--shadow-sm);
        }

        .breakdown-item.good {
            border-left-color: var(--success);
        }

        .breakdown-item.warning {
            border-left-color: var(--warning);
        }

        .breakdown-item.danger {
            border-left-color: var(--danger);
        }

        .breakdown-label {
            font-weight: 600;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .breakdown-value {
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            font-size: 1.25rem;
        }

        /* ===== RECENT ACTIVITY ===== */
        .activity-section {
            background: white;
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--gray-200);
            margin-bottom: 2rem;
        }

        .activity-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .activity-header h2 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
        }

        .activity-timeline {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .activity-item {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            border-radius: var(--radius-md);
            background: var(--gray-50);
            transition: all var(--transition-fast);
            border-left: 4px solid transparent;
        }

        .activity-item:hover {
            background: var(--gray-100);
            transform: translateX(4px);
        }

        .activity-item.success {
            border-left-color: var(--success);
        }

        .activity-item.warning {
            border-left-color: var(--warning);
        }

        .activity-item.info {
            border-left-color: var(--info);
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .activity-item.success .activity-icon {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .activity-item.warning .activity-icon {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .activity-item.info .activity-icon {
            background: rgba(59, 130, 246, 0.1);
            color: var(--info);
        }

        .activity-content h4 {
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 0.25rem;
        }

        .activity-content p {
            color: var(--gray-600);
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
        }

        .activity-time {
            font-size: 0.75rem;
            color: var(--gray-500);
        }

        /* ===== QUICK ACTIONS ===== */
        .actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .action-card {
            background: white;
            padding: 2rem;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            text-decoration: none;
            color: inherit;
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
            cursor: pointer;
            border: 1px solid var(--gray-200);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .action-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-xl);
            border-color: var(--primary);
        }

        .action-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }

        .action-icon {
            width: 64px;
            height: 64px;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        }

        .action-card:nth-child(2) .action-icon {
            background: linear-gradient(135deg, var(--success), var(--secondary-dark));
        }

        .action-card:nth-child(3) .action-icon {
            background: linear-gradient(135deg, var(--warning), #d97706);
        }

        .action-card:nth-child(4) .action-icon {
            background: linear-gradient(135deg, var(--info), #1d4ed8);
        }

        .action-card h3 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.25rem;
            margin-bottom: 0.75rem;
            color: var(--dark);
        }

        .action-card p {
            color: var(--gray-600);
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
        }

        .action-arrow {
            font-size: 1.5rem;
            color: var(--primary);
            opacity: 0;
            transform: translateX(-10px);
            transition: all var(--transition-normal);
        }

        .action-card:hover .action-arrow {
            opacity: 1;
            transform: translateX(0);
        }

        /* ===== VIOLATIONS TABLE ===== */
        .violations-table {
            background: white;
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--gray-200);
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .table-responsive {
            overflow-x: auto;
        }

        .violations-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .violations-table th {
            background: var(--gray-50);
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: var(--gray-700);
            border-bottom: 2px solid var(--gray-200);
            white-space: nowrap;
        }

        .violations-table td {
            padding: 1rem;
            border-bottom: 1px solid var(--gray-200);
            vertical-align: middle;
        }

        .violations-table tr:hover {
            background: var(--gray-50);
        }

        .severity-badge {
            padding: 0.25rem 0.75rem;
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .severity-high {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        .severity-medium {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .severity-low {
            background: rgba(59, 130, 246, 0.1);
            color: var(--info);
        }

        .action-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .action-btn.primary {
            background: var(--primary);
            color: white;
        }

        .action-btn.primary:hover {
            background: var(--primary-dark);
        }

        .action-btn.secondary {
            background: var(--gray-100);
            color: var(--gray-700);
        }

        .action-btn.secondary:hover {
            background: var(--gray-200);
        }

        /* ===== FLOATING AI CHATBOT ===== */
        .chatbot-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 10000;
        }

        .chatbot-toggle {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: var(--shadow-2xl);
            transition: all var(--transition-normal);
            border: none;
            position: relative;
            overflow: hidden;
        }

        .chatbot-toggle::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.2) 50%, transparent 70%);
            animation: shimmer 3s infinite linear;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .chatbot-toggle:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: var(--shadow-2xl), 0 0 30px rgba(79, 70, 229, 0.4);
        }

        .chatbot-toggle.pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: var(--shadow-2xl), 0 0 0 0 rgba(79, 70, 229, 0.7);
            }
            70% {
                box-shadow: var(--shadow-2xl), 0 0 0 15px rgba(79, 70, 229, 0);
            }
            100% {
                box-shadow: var(--shadow-2xl), 0 0 0 0 rgba(79, 70, 229, 0);
            }
        }

        .chatbot-window {
            position: absolute;
            bottom: 70px;
            right: 0;
            width: 400px;
            height: 600px;
            background: white;
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-2xl);
            display: none;
            flex-direction: column;
            overflow: hidden;
            border: 1px solid var(--gray-200);
            transform-origin: bottom right;
        }

        .chatbot-window.active {
            display: flex;
            animation: slideUp 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .chatbot-header {
            padding: 1.25rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
            overflow: hidden;
        }

        .chatbot-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            animation: shimmer 3s infinite linear;
        }

        .chatbot-header h3 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.25rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            position: relative;
            z-index: 1;
        }

        .chatbot-header .status {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.75rem;
            opacity: 0.9;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
            animation: pulse-green 2s infinite;
        }

        @keyframes pulse-green {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .chatbot-close {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            font-size: 1.25rem;
            cursor: pointer;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
            position: relative;
            z-index: 1;
        }

        .chatbot-close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        .chatbot-messages {
            flex: 1;
            padding: 1.25rem;
            overflow-y: auto;
            background: linear-gradient(180deg, var(--gray-50) 0%, white 100%);
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .chatbot-input-area {
            padding: 1.25rem;
            background: white;
            border-top: 1px solid var(--gray-200);
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .chatbot-input {
            display: flex;
            gap: 0.75rem;
        }

        .chatbot-input input {
            flex: 1;
            padding: 0.875rem 1rem;
            border: 2px solid var(--gray-300);
            border-radius: var(--radius-md);
            font-family: inherit;
            font-size: 0.95rem;
            transition: all var(--transition-fast);
            background: var(--gray-50);
        }

        .chatbot-input input:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .chatbot-input button {
            padding: 0.875rem 1.5rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-family: inherit;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            min-width: 80px;
            justify-content: center;
        }

        .chatbot-input button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .suggested-questions {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .suggested-questions h4 {
            font-size: 0.875rem;
            color: var(--gray-600);
            font-weight: 500;
        }

        .question-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .question-chip {
            padding: 0.5rem 1rem;
            background: var(--gray-100);
            color: var(--gray-700);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-full);
            font-size: 0.875rem;
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .question-chip:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
            border-color: var(--primary);
            box-shadow: var(--shadow-sm);
        }

        /* ===== MODALS ===== */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal-overlay.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal {
            background: white;
            width: 100%;
            max-width: 800px;
            max-height: 90vh;
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-2xl);
            overflow: hidden;
            animation: modalSlideIn 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            padding: 1.5rem 2rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.5rem;
        }

        .modal-close {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 2rem;
            overflow-y: auto;
            max-height: calc(90vh - 140px);
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .main-header {
                padding: 0 1rem;
            }
            
            .header-search {
                width: 200px;
            }
            
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .chatbot-window {
                width: calc(100vw - 60px);
                height: 500px;
                right: 15px;
                bottom: 80px;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .actions-grid {
                grid-template-columns: 1fr;
            }
            
            .compliance-meter {
                flex-direction: column;
                gap: 2rem;
                text-align: center;
            }
            
            .header-search {
                display: none;
            }
        }

        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .content-wrapper {
                padding: 1rem;
            }
            
            .header-actions {
                gap: 0.5rem;
            }
            
            .user-menu span {
                display: none;
            }
        }

        /* ===== UTILITY CLASSES ===== */
        .text-success { color: var(--success); }
        .text-warning { color: var(--warning); }
        .text-danger { color: var(--danger); }
        .text-info { color: var(--info); }
        .text-primary { color: var(--primary); }

        .bg-success { background: var(--success); }
        .bg-warning { background: var(--warning); }
        .bg-danger { background: var(--danger); }
        .bg-info { background: var(--info); }
        .bg-primary { background: var(--primary); }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--gray-300);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .hidden { display: none !important; }
        .flex { display: flex; }
        .grid { display: grid; }
        .block { display: block; }
        .inline-block { display: inline-block; }

        .mt-1 { margin-top: 0.5rem; }
        .mt-2 { margin-top: 1rem; }
        .mt-3 { margin-top: 1.5rem; }
        .mt-4 { margin-top: 2rem; }
        .mt-5 { margin-top: 2.5rem; }

        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .mb-3 { margin-bottom: 1.5rem; }
        .mb-4 { margin-bottom: 2rem; }
        .mb-5 { margin-bottom: 2.5rem; }

        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .text-left { text-align: left; }

        .font-bold { font-weight: 700; }
        .font-semibold { font-weight: 600; }
        .font-medium { font-weight: 500; }

        .cursor-pointer { cursor: pointer; }
        .transition-all { transition: all var(--transition-normal); }
    </style>
</head>
<body>
    <!-- App Container -->
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <i class="fas fa-shield-alt"></i>
                    <span>PolicyGuard</span>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-group">
                    <div class="nav-group-title">Main</div>
                    <a href="#" class="nav-item active">
                        <i class="fas fa-home"></i>
                        <span>Dashboard</span>
                    </a>
                    <a href="#" class="nav-item" onclick="openModal('policyModal')">
                        <i class="fas fa-search"></i>
                        <span>Policy Checker</span>
                    </a>
                    <a href="#" class="nav-item" onclick="openModal('complaintModal')">
                        <i class="fas fa-comments"></i>
                        <span>Complaint Analyzer</span>
                        <span class="nav-badge">3</span>
                    </a>
                </div>
                
                <div class="nav-group">
                    <div class="nav-group-title">Monitoring</div>
                    <a href="#" class="nav-item">
                        <i class="fas fa-chart-line"></i>
                        <span>Compliance Analytics</span>
                    </a>
                    <a href="#" class="nav-item">
                        <i class="fas fa-sync-alt"></i>
                        <span>Update Tracker</span>
                        <span class="nav-badge">5</span>
                    </a>
                    <a href="#" class="nav-item">
                        <i class="fas fa-bell"></i>
                        <span>Alerts & Notifications</span>
                        <span class="nav-badge">12</span>
                    </a>
                </div>
                
                <div class="nav-group">
                    <div class="nav-group-title">Management</div>
                    <a href="#" class="nav-item">
                        <i class="fas fa-file-contract"></i>
                        <span>Policy Templates</span>
                    </a>
                    <a href="#" class="nav-item">
                        <i class="fas fa-users"></i>
                        <span>Team Management</span>
                    </a>
                    <a href="#" class="nav-item">
                        <i class="fas fa-cogs"></i>
                        <span>Settings</span>
                    </a>
                </div>
                
                <div class="nav-group">
                    <div class="nav-group-title">Reports</div>
                    <a href="#" class="nav-item">
                        <i class="fas fa-file-pdf"></i>
                        <span>Compliance Reports</span>
                    </a>
                    <a href="#" class="nav-item">
                        <i class="fas fa-chart-pie"></i>
                        <span>Risk Analysis</span>
                    </a>
                    <a href="#" class="nav-item">
                        <i class="fas fa-history"></i>
                        <span>Audit Logs</span>
                    </a>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-info">
                        <h4>Admin User</h4>
                        <p>Compliance Officer</p>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="main-header">
                <div class="header-left">
                    <div class="page-title">
                        <h1>Compliance Dashboard</h1>
                        <p>Welcome back! Here's what's happening with your data policies.</p>
                    </div>
                </div>
                
                <div class="header-right">
                    <div class="header-search">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" class="search-input" placeholder="Search policies, complaints...">
                    </div>
                    
                    <div class="header-actions">
                        <button class="header-action">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge">3</span>
                        </button>
                        <button class="header-action">
                            <i class="fas fa-cog"></i>
                        </button>
                        <button class="header-action" onclick="toggleTheme()">
                            <i class="fas fa-moon"></i>
                        </button>
                    </div>
                    
                    <div class="user-menu">
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <span>Admin</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
            </header>

            <!-- Content Wrapper -->
            <div class="content-wrapper">
                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-file-contract"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="policiesCount">0</h3>
                            <p>Policies Analyzed</p>
                            <div class="stat-trend trend-up">
                                <i class="fas fa-arrow-up"></i>
                                <span>12% this month</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="complianceRate">0%</h3>
                            <p>Average Compliance</p>
                            <div class="stat-trend trend-up">
                                <i class="fas fa-arrow-up"></i>
                                <span>5% this month</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="complaintsCount">0</h3>
                            <p>Complaints Processed</p>
                            <div class="stat-trend trend-down">
                                <i class="fas fa-arrow-down"></i>
                                <span>8% this month</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="updatesCount">0</h3>
                            <p>Updates Tracked</p>
                            <div class="stat-trend trend-up">
                                <i class="fas fa-arrow-up"></i>
                                <span>15% this month</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Grid -->
                <div class="charts-grid">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">Compliance Trend</h3>
                            <div class="chart-controls">
                                <button class="chart-control active" onclick="changeChartPeriod('week')">Week</button>
                                <button class="chart-control" onclick="changeChartPeriod('month')">Month</button>
                                <button class="chart-control" onclick="changeChartPeriod('quarter')">Quarter</button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="complianceChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">Violation Distribution</h3>
                            <div class="chart-controls">
                                <button class="chart-control active" onclick="changeViolationType('severity')">By Severity</button>
                                <button class="chart-control" onclick="changeViolationType('category')">By Category</button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="violationChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Compliance Meter -->
                <div class="compliance-meter">
                    <div class="meter-circle">
                        <svg width="180" height="180" viewBox="0 0 180 180">
                            <defs>
                                <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" stop-color="#4f46e5" />
                                    <stop offset="100%" stop-color="#10b981" />
                                </linearGradient>
                            </defs>
                            <circle class="progress-ring-bg" cx="90" cy="90" r="80" />
                            <circle class="progress-ring-fill" cx="90" cy="90" r="80" />
                        </svg>
                        <div class="meter-value">
                            <h2 id="complianceScore">0%</h2>
                            <p>Overall Compliance</p>
                        </div>
                    </div>
                    
                    <div class="meter-breakdown">
                        <div class="breakdown-item good">
                            <div class="breakdown-label">
                                <i class="fas fa-check-circle"></i>
                                <span>GDPR Compliance</span>
                            </div>
                            <div class="breakdown-value" id="gdprScore">0%</div>
                        </div>
                        <div class="breakdown-item good">
                            <div class="breakdown-label">
                                <i class="fas fa-check-circle"></i>
                                <span>CCPA Compliance</span>
                            </div>
                            <div class="breakdown-value" id="ccpaScore">0%</div>
                        </div>
                        <div class="breakdown-item warning">
                            <div class="breakdown-label">
                                <i class="fas fa-exclamation-triangle"></i>
                                <span>Security Measures</span>
                            </div>
                            <div class="breakdown-value" id="securityScore">0%</div>
                        </div>
                        <div class="breakdown-item danger">
                            <div class="breakdown-label">
                                <i class="fas fa-times-circle"></i>
                                <span>Third-Party Disclosure</span>
                            </div>
                            <div class="breakdown-value" id="thirdPartyScore">0%</div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="actions-grid">
                    <div class="action-card" onclick="openModal('policyModal')">
                        <div class="action-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h3>Check Policy</h3>
                        <p>Upload or paste policy text for compliance analysis</p>
                        <span class="action-arrow"></span>
                    </div>
                    
                    <div class="action-card" onclick="openModal('complaintModal')">
                        <div class="action-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h3>Analyze Complaint</h3>
                        <p>Process complaints with sentiment analysis</p>
                        <span class="action-arrow"></span>
                    </div>
                    
                    <div class="action-card" onclick="generateReport()">
                        <div class="action-icon">
                            <i class="fas fa-file-pdf"></i>
                        </div>
                        <h3>Generate Report</h3>
                        <p>Create comprehensive compliance reports</p>
                        <span class="action-arrow"></span>
                    </div>
                    
                    <div class="action-card" onclick="showNotification('Batch upload coming soon!', 'info')">
                        <div class="action-icon">
                            <i class="fas fa-file-upload"></i>
                        </div>
                        <h3>Batch Upload</h3>
                        <p>Upload multiple policies for bulk analysis</p>
                        <span class="action-arrow"></span>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="activity-section">
                    <div class="activity-header">
                        <h2>Recent Activity</h2>
                        <button class="action-btn secondary" onclick="loadMoreActivity()">
                            View All
                        </button>
                    </div>
                    <div class="activity-timeline">
                        <div class="activity-item success">
                            <div class="activity-icon">
                                <i class="fas fa-check"></i>
                            </div>
                            <div class="activity-content">
                                <h4>GDPR Compliance Passed</h4>
                                <p>Company X privacy policy scored 94% compliance</p>
                                <span class="activity-time">2 minutes ago</span>
                            </div>
                        </div>
                        <div class="activity-item warning">
                            <div class="activity-icon">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="activity-content">
                                <h4>High Severity Complaint</h4>
                                <p>Data breach complaint flagged for immediate review</p>
                                <span class="activity-time">15 minutes ago</span>
                            </div>
                        </div>
                        <div class="activity-item info">
                            <div class="activity-icon">
                                <i class="fas fa-sync-alt"></i>
                            </div>
                            <div class="activity-content">
                                <h4>Policy Update Detected</h4>
                                <p>Major changes in data retention policy section</p>
                                <span class="activity-time">1 hour ago</span>
                            </div>
                        </div>
                        <div class="activity-item success">
                            <div class="activity-icon">
                                <i class="fas fa-file-contract"></i>
                            </div>
                            <div class="activity-content">
                                <h4>New Policy Added</h4>
                                <p>Marketing data policy added to the system</p>
                                <span class="activity-time">2 hours ago</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Violations Table -->
                <div class="violations-table">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span>Recent Violations</span>
                        </div>
                        <div class="card-actions">
                            <button class="card-action" title="Refresh">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                            <button class="card-action" title="Export">
                                <i class="fas fa-download"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Policy</th>
                                    <th>Violation Type</th>
                                    <th>Severity</th>
                                    <th>Detected</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Privacy Policy v2.1</td>
                                    <td>Missing Data Retention</td>
                                    <td><span class="severity-badge severity-high">High</span></td>
                                    <td>2 hours ago</td>
                                    <td><span class="text-warning font-semibold">Pending</span></td>
                                    <td>
                                        <button class="action-btn primary">Review</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Cookie Policy</td>
                                    <td>Vague Consent Mechanism</td>
                                    <td><span class="severity-badge severity-medium">Medium</span></td>
                                    <td>5 hours ago</td>
                                    <td><span class="text-info font-semibold">In Progress</span></td>
                                    <td>
                                        <button class="action-btn primary">Review</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Terms of Service</td>
                                    <td>Insufficient Security Info</td>
                                    <td><span class="severity-badge severity-medium">Medium</span></td>
                                    <td>1 day ago</td>
                                    <td><span class="text-success font-semibold">Resolved</span></td>
                                    <td>
                                        <button class="action-btn secondary">View</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Employee Data Policy</td>
                                    <td>Third-Party Disclosure</td>
                                    <td><span class="severity-badge severity-low">Low</span></td>
                                    <td>2 days ago</td>
                                    <td><span class="text-success font-semibold">Resolved</span></td>
                                    <td>
                                        <button class="action-btn secondary">View</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>

        <!-- Floating AI Chatbot -->
        <div class="chatbot-container">
            <button class="chatbot-toggle pulse" id="chatbotToggle" onclick="toggleChatbot()">
                <i class="fas fa-robot"></i>
            </button>
            
            <div class="chatbot-window" id="chatbotWindow">
                <div class="chatbot-header">
                    <div>
                        <h3><i class="fas fa-robot"></i> AI Policy Assistant</h3>
                        <div class="status">
                            <span class="status-dot"></span>
                            <span>Online - Ready to help</span>
                        </div>
                    </div>
                    <button class="chatbot-close" onclick="toggleChatbot()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="chatbot-messages" id="chatbotMessages">
                    <!-- Messages will be added here -->
                </div>
                
                <div class="chatbot-input-area">
                    <div class="suggested-questions">
                        <h4>Try asking:</h4>
                        <div class="question-chips">
                            <button class="question-chip" onclick="askSuggestedQuestion(this)">
                                <i class="fas fa-shield-alt"></i> What is GDPR?
                            </button>
                            <button class="question-chip" onclick="askSuggestedQuestion(this)">
                                <i class="fas fa-file-contract"></i> Policy compliance check
                            </button>
                            <button class="question-chip" onclick="askSuggestedQuestion(this)">
                                <i class="fas fa-database"></i> Data retention rules
                            </button>
                        </div>
                    </div>
                    
                    <div class="chatbot-input">
                        <input type="text" id="chatbotInput" placeholder="Ask anything about data policies..." 
                               onkeypress="if(event.key === 'Enter') sendChatMessage()"
                               autocomplete="off">
                        <button id="chatbotSend" onclick="sendChatMessage()">
                            <i class="fas fa-paper-plane"></i> Send
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Policy Checker Modal -->
        <div class="modal-overlay" id="policyModal">
            <div class="modal">
                <div class="modal-header">
                    <h3><i class="fas fa-search"></i> Policy Compliance Checker</h3>
                    <button class="modal-close" onclick="closeModal('policyModal')">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="policyText">
                            <i class="fas fa-file-alt"></i> Policy Text
                        </label>
                        <textarea id="policyText" class="form-control" placeholder="Paste your policy text here..."></textarea>
                    </div>
                    
                    <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                        <button class="btn btn-primary" onclick="analyzePolicy()" id="analyzeBtn">
                            <i class="fas fa-search"></i> Analyze Policy
                        </button>
                        <button class="btn btn-secondary" onclick="loadSamplePolicy()">
                            <i class="fas fa-vial"></i> Load Sample
                        </button>
                        <button class="btn btn-secondary" onclick="closeModal('policyModal')">
                            Cancel
                        </button>
                    </div>
                    
                    <div class="results-container" id="policyResults" style="display: none;">
                        <h3 style="margin-bottom: 1.5rem;">Analysis Results</h3>
                        <div id="policyResultsContent"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Complaint Analyzer Modal -->
        <div class="modal-overlay" id="complaintModal">
            <div class="modal">
                <div class="modal-header">
                    <h3><i class="fas fa-comments"></i> Complaint Analyzer</h3>
                    <button class="modal-close" onclick="closeModal('complaintModal')">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="complaintText">
                            <i class="fas fa-comment-dots"></i> Complaint Description
                        </label>
                        <textarea id="complaintText" class="form-control" placeholder="Enter complaint details..."></textarea>
                    </div>
                    
                    <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                        <button class="btn btn-primary" onclick="analyzeComplaint()" id="analyzeComplaintBtn">
                            <i class="fas fa-chart-line"></i> Analyze Complaint
                        </button>
                        <button class="btn btn-secondary" onclick="closeModal('complaintModal')">
                            Cancel
                        </button>
                    </div>
                    
                    <div class="results-container" id="complaintResults" style="display: none;">
                        <h3 style="margin-bottom: 1.5rem;">Analysis Results</h3>
                        <div id="complaintResultsContent"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // ========== DASHBOARD INITIALIZATION ==========
        let complianceChart, violationChart;
        let currentChartPeriod = 'week';
        let currentViolationType = 'severity';
        
        document.addEventListener('DOMContentLoaded', function() {
            initializeDashboard();
            initChatbot();
            initializeCharts();
            
            // Add event listeners
            document.getElementById('chatbotInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendChatMessage();
            });
        });
        
        function initializeDashboard() {
            // Animate counters
            animateCounter('policiesCount', 1247);
            animateCounter('complaintsCount', 589);
            animateCounter('updatesCount', 342);
            
            // Animate compliance scores
            setTimeout(() => {
                document.getElementById('complianceRate').textContent = '87%';
                document.getElementById('complianceScore').textContent = '87%';
                document.getElementById('gdprScore').textContent = '92%';
                document.getElementById('ccpaScore').textContent = '88%';
                document.getElementById('securityScore').textContent = '75%';
                document.getElementById('thirdPartyScore').textContent = '65%';
                
                // Animate compliance meter
                const circle = document.querySelector('.progress-ring-fill');
                const radius = circle.r.baseVal.value;
                const circumference = radius * 2 * Math.PI;
                circle.style.strokeDasharray = `${circumference} ${circumference}`;
                circle.style.strokeDashoffset = circumference;
                const offset = circumference - (87 / 100) * circumference;
                setTimeout(() => {
                    circle.style.strokeDashoffset = offset;
                }, 500);
            }, 1000);
        }
        
        function animateCounter(elementId, finalValue) {
            let current = 0;
            const element = document.getElementById(elementId);
            const increment = finalValue / 50;
            const timer = setInterval(() => {
                current += increment;
                if (current >= finalValue) {
                    element.textContent = finalValue.toLocaleString();
                    clearInterval(timer);
                } else {
                    element.textContent = Math.floor(current).toLocaleString();
                }
            }, 30);
        }
        
        // ========== CHART FUNCTIONS ==========
        function initializeCharts() {
            // Compliance Trend Chart
            const complianceCtx = document.getElementById('complianceChart').getContext('2d');
            complianceChart = new Chart(complianceCtx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Compliance Score',
                        data: [78, 82, 85, 87, 86, 88, 90],
                        borderColor: '#4f46e5',
                        backgroundColor: 'rgba(79, 70, 229, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#4f46e5',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 6,
                        pointHoverRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#ffffff',
                            bodyColor: '#ffffff',
                            borderColor: '#4f46e5',
                            borderWidth: 1,
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.parsed.y}%`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        y: {
                            beginAtZero: false,
                            min: 70,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        }
                    }
                }
            });
            
            // Violation Distribution Chart
            const violationCtx = document.getElementById('violationChart').getContext('2d');
            violationChart = new Chart(violationCtx, {
                type: 'doughnut',
                data: {
                    labels: ['High', 'Medium', 'Low'],
                    datasets: [{
                        data: [12, 24, 8],
                        backgroundColor: [
                            'rgba(239, 68, 68, 0.8)',
                            'rgba(245, 158, 11, 0.8)',
                            'rgba(59, 130, 246, 0.8)'
                        ],
                        borderColor: [
                            'rgb(239, 68, 68)',
                            'rgb(245, 158, 11)',
                            'rgb(59, 130, 246)'
                        ],
                        borderWidth: 2,
                        hoverOffset: 15
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                usePointStyle: true,
                                font: {
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.parsed;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = Math.round((value / total) * 100);
                                    return `${label}: ${value} violations (${percentage}%)`;
                                }
                            }
                        }
                    },
                    cutout: '70%'
                }
            });
        }
        
        function changeChartPeriod(period) {
            currentChartPeriod = period;
            
            // Update active button
            document.querySelectorAll('.chart-controls .chart-control').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update chart data based on period
            let labels, data;
            switch(period) {
                case 'week':
                    labels = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
                    data = [78, 82, 85, 87, 86, 88, 90];
                    break;
                case 'month':
                    labels = ['Week 1', 'Week 2', 'Week 3', 'Week 4'];
                    data = [82, 85, 87, 89];
                    break;
                case 'quarter':
                    labels = ['Month 1', 'Month 2', 'Month 3'];
                    data = [80, 85, 88];
                    break;
            }
            
            complianceChart.data.labels = labels;
            complianceChart.data.datasets[0].data = data;
            complianceChart.update();
        }
        
        function changeViolationType(type) {
            currentViolationType = type;
            
            // Update active button
            document.querySelectorAll('.chart-controls .chart-control').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update chart data based on type
            if (type === 'category') {
                violationChart.data.labels = ['Data Collection', 'Third-Party', 'Security', 'Retention', 'User Rights'];
                violationChart.data.datasets[0].data = [8, 15, 6, 10, 5];
                violationChart.data.datasets[0].backgroundColor = [
                    'rgba(79, 70, 229, 0.8)',
                    'rgba(16, 185, 129, 0.8)',
                    'rgba(245, 158, 11, 0.8)',
                    'rgba(59, 130, 246, 0.8)',
                    'rgba(239, 68, 68, 0.8)'
                ];
                violationChart.data.datasets[0].borderColor = [
                    'rgb(79, 70, 229)',
                    'rgb(16, 185, 129)',
                    'rgb(245, 158, 11)',
                    'rgb(59, 130, 246)',
                    'rgb(239, 68, 68)'
                ];
            } else {
                violationChart.data.labels = ['High', 'Medium', 'Low'];
                violationChart.data.datasets[0].data = [12, 24, 8];
                violationChart.data.datasets[0].backgroundColor = [
                    'rgba(239, 68, 68, 0.8)',
                    'rgba(245, 158, 11, 0.8)',
                    'rgba(59, 130, 246, 0.8)'
                ];
                violationChart.data.datasets[0].borderColor = [
                    'rgb(239, 68, 68)',
                    'rgb(245, 158, 11)',
                    'rgb(59, 130, 246)'
                ];
            }
            
            violationChart.update();
        }
        
        // ========== UI FUNCTIONS ==========
        function toggleTheme() {
            const body = document.body;
            const currentBg = body.style.background;
            const darkTheme = 'linear-gradient(135deg, #1e1b4b 0%, #3730a3 100%)';
            const lightTheme = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            
            if (currentBg === darkTheme || !currentBg) {
                body.style.background = darkTheme;
                event.target.innerHTML = '<i class="fas fa-sun"></i>';
            } else {
                body.style.background = lightTheme;
                event.target.innerHTML = '<i class="fas fa-moon"></i>';
            }
        }
        
        function generateReport() {
            showNotification('Generating compliance report...', 'info');
            
            // Simulate report generation
            setTimeout(() => {
                showNotification('Report generated successfully!', 'success');
                
                // Create a sample report download
                const reportContent = `
                    Compliance Report - Generated on ${new Date().toLocaleDateString()}
                    =============================================
                    
                    Overall Compliance: 87%
                    Policies Analyzed: 1,247
                    Complaints Processed: 589
                    
                    Key Findings:
                    - GDPR Compliance: 92% 
                    - CCPA Compliance: 88% 
                    - Security Measures: 75% 
                    - Third-Party Disclosure: 65% 
                    
                    Recommendations:
                    1. Improve third-party data sharing disclosures
                    2. Enhance security measure documentation
                    3. Regular compliance audits recommended
                    
                    Generated by PolicyGuard AI
                `;
                
                const blob = new Blob([reportContent], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `compliance-report-${new Date().toISOString().split('T')[0]}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 2000);
        }
        
        function loadMoreActivity() {
            showNotification('Loading more activities...', 'info');
            // In a real app, this would load more data from the server
            setTimeout(() => {
                showNotification('Activities loaded successfully!', 'success');
            }, 1000);
        }
        
        // ========== MODAL FUNCTIONS ==========
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }
        
        // ========== NOTIFICATION SYSTEM ==========
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 1rem 1.5rem;
                border-radius: var(--radius-md);
                color: white;
                z-index: 2000;
                animation: slideIn 0.3s ease;
                display: flex;
                align-items: center;
                gap: 0.75rem;
                box-shadow: var(--shadow-lg);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.1);
            `;
            
            const icons = {
                success: 'check-circle',
                error: 'exclamation-circle',
                info: 'info-circle',
                warning: 'exclamation-triangle'
            };
            
            notification.innerHTML = `
                <i class="fas fa-${icons[type]}"></i>
                <span>${message}</span>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        // ========== CHATBOT FUNCTIONS ==========
        class AIChatbot {
            constructor() {
                this.responses = {
                    'gdpr': {
                        response: `The <strong>General Data Protection Regulation (GDPR)</strong> is a comprehensive data protection law in the European Union that became enforceable in May 2018. Here are the key aspects:

                        <div class="ai-info">
                            <strong>Key Principles:</strong><br>
                             Lawfulness, fairness, and transparency<br>
                             Purpose limitation<br>
                             Data minimization<br>
                             Accuracy<br>
                             Storage limitation<br>
                             Integrity and confidentiality<br>
                             Accountability
                        </div>`,
                        followup: ['GDPR penalties', 'GDPR implementation', 'GDPR vs CCPA']
                    },
                    'compliance': {
                        response: `To <strong>check policy compliance</strong>, follow this systematic approach:

                        <div class="ai-info">
                            <strong>Step-by-Step Compliance Check:</strong><br>
                            1. <strong>Data Inventory:</strong> Map all data collection points<br>
                            2. <strong>Consent Review:</strong> Verify explicit consent mechanisms<br>
                            3. <strong>Policy Analysis:</strong> Check policy completeness and clarity<br>
                            4. <strong>Third-Party Assessment:</strong> Review data sharing agreements<br>
                            5. <strong>Security Audit:</strong> Verify security measures and encryption
                        </div>`,
                        followup: ['Fix compliance issues', 'Best practices', 'Automated tools']
                    }
                };
                this.chatHistory = [];
            }
            
            getResponse(userMessage) {
                const lowerMessage = userMessage.toLowerCase();
                this.chatHistory.push({ role: 'user', content: userMessage });
                
                for (const [keyword, data] of Object.entries(this.responses)) {
                    if (lowerMessage.includes(keyword)) {
                        this.chatHistory.push({ role: 'assistant', content: data.response });
                        return {
                            response: data.response,
                            followup: data.followup || []
                        };
                    }
                }
                
                const defaultResponse = "I understand you're asking about data policies. For effective compliance, ensure your policies clearly state data collection purposes, obtain explicit consent, implement security measures, and respect user rights.";
                this.chatHistory.push({ role: 'assistant', content: defaultResponse });
                return {
                    response: defaultResponse,
                    followup: ['Tell me about GDPR', 'How to check compliance?', 'Data retention rules']
                };
            }
            
            getGreeting() {
                return `Hello! I'm your <strong>AI Policy Assistant</strong> 

                I specialize in data policy compliance and can help you with GDPR, CCPA, privacy policies, security measures, and more.

                <div class="ai-info">
                    <strong>Try asking me:</strong><br>
                     "What should be in a privacy policy?"<br>
                     "How do I check GDPR compliance?"<br>
                     "What are data retention best practices?"<br>
                     "How to handle user data requests?"<br>
                     "What security measures are required?"
                </div>

                What would you like to know about data policy compliance today?`;
            }
        }
        
        let chatbot = new AIChatbot();
        let isTyping = false;
        
        function initChatbot() {
            const messagesDiv = document.getElementById('chatbotMessages');
            const greeting = chatbot.getGreeting();
            
            // Add greeting message
            addMessage(greeting, false);
            chatbot.chatHistory.push({ role: 'assistant', content: greeting });
        }
        
        function toggleChatbot() {
            const chatbotWindow = document.getElementById('chatbotWindow');
            const chatbotToggle = document.getElementById('chatbotToggle');
            
            chatbotWindow.classList.toggle('active');
            if (chatbotWindow.classList.contains('active')) {
                chatbotToggle.classList.remove('pulse');
            } else {
                chatbotToggle.classList.add('pulse');
            }
        }
        
        function addMessage(content, isUser = false) {
            const messagesDiv = document.getElementById('chatbotMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'assistant'}`;
            
            if (isUser) {
                messageDiv.innerHTML = `
                    <div class="message-header">
                        <i class="fas fa-user"></i>
                        <span>You</span>
                    </div>
                    <div class="message-content">${content}</div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="message-header">
                        <i class="fas fa-robot"></i>
                        <span>AI Assistant</span>
                    </div>
                    <div class="message-content">${content}</div>
                `;
            }
            
            messagesDiv.appendChild(messageDiv);
            setTimeout(() => {
                messageDiv.scrollIntoView({ behavior: 'smooth', block: 'end' });
            }, 100);
        }
        
        function sendChatMessage() {
            if (isTyping) return;
            
            const input = document.getElementById('chatbotInput');
            const sendBtn = document.getElementById('chatbotSend');
            const message = input.value.trim();
            
            if (!message) return;
            
            input.value = '';
            sendBtn.disabled = true;
            
            addMessage(message, true);
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                const aiResponse = chatbot.getResponse(message);
                addMessage(aiResponse.response, false);
                updateSuggestedQuestions(aiResponse.followup);
                sendBtn.disabled = false;
                input.focus();
            }, 1000 + Math.random() * 1000);
        }
        
        function showTypingIndicator() {
            if (isTyping) return;
            isTyping = true;
            const messagesDiv = document.getElementById('chatbotMessages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message assistant typing';
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = `
                <div class="message-header">
                    <i class="fas fa-robot"></i>
                    <span>AI Assistant</span>
                </div>
                <div class="message-content">
                    <div class="typing-indicator">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
            `;
            messagesDiv.appendChild(typingDiv);
            typingDiv.scrollIntoView({ behavior: 'smooth', block: 'end' });
        }
        
        function hideTypingIndicator() {
            isTyping = false;
            const typingDiv = document.getElementById('typingIndicator');
            if (typingDiv) typingDiv.remove();
        }
        
        function updateSuggestedQuestions(questions) {
            const chipsContainer = document.querySelector('.question-chips');
            if (!chipsContainer) return;
            
            chipsContainer.innerHTML = '';
            questions.slice(0, 3).forEach(question => {
                const chip = document.createElement('button');
                chip.className = 'question-chip';
                chip.innerHTML = `<i class="fas fa-lightbulb"></i> ${question}`;
                chip.onclick = () => askSuggestedQuestion(chip);
                chipsContainer.appendChild(chip);
            });
        }
        
        function askSuggestedQuestion(button) {
            const question = button.textContent.replace(' ', '').trim();
            document.getElementById('chatbotInput').value = question;
            sendChatMessage();
        }
        
        // ========== POLICY ANALYSIS FUNCTIONS ==========
        function loadSamplePolicy() {
            const sampleText = `PRIVACY POLICY

1. DATA COLLECTION
We collect personal information including name, email address, and usage data when you use our services. This data is used to provide and improve our services.

2. DATA USAGE
Your data is used solely for service provision, communication, and analytics. We do not sell your personal information to third parties.

3. DATA SHARING
We may share data with trusted partners for service delivery, but only under strict confidentiality agreements.

4. USER RIGHTS
You have the right to access, correct, or delete your personal data. Contact us at privacy@company.com to exercise these rights.

5. SECURITY MEASURES
We implement industry-standard security measures including encryption and access controls to protect your data.

6. DATA RETENTION
We retain your data for 12 months after account closure, unless required by law to keep it longer.

7. COOKIES
We use cookies to enhance user experience. You can control cookie settings through your browser.`;
            
            document.getElementById('policyText').value = sampleText;
            showNotification('Sample policy loaded successfully!', 'success');
        }
        
        async function analyzePolicy() {
            const policyText = document.getElementById('policyText').value;
            if (!policyText.trim()) {
                showNotification('Please enter policy text', 'error');
                return;
            }
            
            const analyzeBtn = document.getElementById('analyzeBtn');
            const originalText = analyzeBtn.innerHTML;
            analyzeBtn.innerHTML = '<span class="loading"></span> Analyzing...';
            analyzeBtn.disabled = true;
            
            try {
                const response = await fetch('/api/check_policy', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ policy_text: policyText })
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    displayPolicyResults(result);
                    updateStats();
                    showNotification('Policy analysis completed!', 'success');
                } else {
                    showNotification(`Error: ${result.error}`, 'error');
                }
            } catch (error) {
                showNotification('Failed to connect to server', 'error');
            } finally {
                analyzeBtn.innerHTML = originalText;
                analyzeBtn.disabled = false;
            }
        }
        
        function displayPolicyResults(result) {
            const resultsDiv = document.getElementById('policyResults');
            const contentDiv = document.getElementById('policyResultsContent');
            
            resultsDiv.style.display = 'block';
            
            let html = `
                <div class="result-item ${result.compliance_percentage >= 80 ? 'success' : result.compliance_percentage >= 60 ? 'warning' : 'error'}">
                    <div class="result-title">
                        <i class="fas fa-${result.compliance_percentage >= 80 ? 'check-circle' : result.compliance_percentage >= 60 ? 'exclamation-triangle' : 'times-circle'}"></i>
                        Compliance Score: ${result.compliance_percentage}%
                    </div>
                    <div class="result-message">
                        ${result.compliance_percentage >= 80 ? 'Policy is largely compliant' : 
                          result.compliance_percentage >= 60 ? 'Policy needs improvements' : 
                          'Policy has significant compliance issues'}
                    </div>
                </div>
            `;
            
            if (result.rule_violations && result.rule_violations.length > 0) {
                html += `<div class="result-title" style="margin-top: 1.5rem;"><i class="fas fa-exclamation-triangle"></i> Rule Violations</div>`;
                result.rule_violations.forEach(violation => {
                    html += `
                        <div class="result-item error">
                            <div class="result-title">
                                <i class="fas fa-times-circle"></i>
                                ${violation.rule}: ${violation.issue}
                            </div>
                            <div class="result-message">
                                Severity: ${violation.severity}
                            </div>
                        </div>
                    `;
                });
            }
            
            contentDiv.innerHTML = html;
        }
        
        async function analyzeComplaint() {
            const complaintText = document.getElementById('complaintText').value;
            if (!complaintText.trim()) {
                showNotification('Please enter complaint description', 'error');
                return;
            }
            
            const analyzeBtn = document.getElementById('analyzeComplaintBtn');
            const originalText = analyzeBtn.innerHTML;
            analyzeBtn.innerHTML = '<span class="loading"></span> Analyzing...';
            analyzeBtn.disabled = true;
            
            try {
                const response = await fetch('/api/analyze_complaint', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ complaint_text: complaintText })
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    displayComplaintResults(result);
                    updateStats();
                    showNotification('Complaint analysis completed!', 'success');
                } else {
                    showNotification(`Error: ${result.error}`, 'error');
                }
            } catch (error) {
                showNotification('Failed to connect to server', 'error');
            } finally {
                analyzeBtn.innerHTML = originalText;
                analyzeBtn.disabled = false;
            }
        }
        
        function displayComplaintResults(result) {
            const resultsDiv = document.getElementById('complaintResults');
            const contentDiv = document.getElementById('complaintResultsContent');
            
            resultsDiv.style.display = 'block';
            
            let html = `
                <div class="result-item ${result.sentiment_score > 0.7 ? 'error' : result.sentiment_score > 0.4 ? 'warning' : 'success'}">
                    <div class="result-title">
                        <i class="fas fa-${result.sentiment_score > 0.7 ? 'sad-tear' : result.sentiment_score > 0.4 ? 'meh' : 'smile'}"></i>
                        Sentiment Score: ${(result.sentiment_score * 100).toFixed(1)}%
                    </div>
                    <div class="result-message">
                        ${result.sentiment_score > 0.7 ? 'Highly negative sentiment detected' : 
                          result.sentiment_score > 0.4 ? 'Moderately negative sentiment' : 
                          'Positive or neutral sentiment'}
                    </div>
                </div>
            `;
            
            if (result.features) {
                html += `<div class="result-title" style="margin-top: 1.5rem;"><i class="fas fa-chart-pie"></i> Text Analysis</div>`;
                html += `
                    <div class="result-item info">
                        <div class="result-details">
                            <strong>Word Count:</strong> ${result.features.word_count}<br>
                            <strong>Unique Words:</strong> ${result.features.unique_words}<br>
                            <strong>Average Word Length:</strong> ${result.features.avg_word_length.toFixed(2)}<br>
                            <strong>Urgent Words:</strong> ${result.features.has_urgent_words ? 'Yes' : 'No'}<br>
                            <strong>Emotional Words:</strong> ${result.features.has_emotional_words ? 'Yes' : 'No'}
                        </div>
                    </div>
                `;
            }
            
            contentDiv.innerHTML = html;
        }
        
        function updateStats() {
            const policiesCount = parseInt(document.getElementById('policiesCount').textContent.replace(',', '')) || 0;
            const complaintsCount = parseInt(document.getElementById('complaintsCount').textContent.replace(',', '')) || 0;
            
            document.getElementById('policiesCount').textContent = (policiesCount + 1).toLocaleString();
            document.getElementById('complaintsCount').textContent = (complaintsCount + 1).toLocaleString();
        }
    </script>
</body>
</html>